#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "yay0.h"

static const unsigned char dec_data[] = "MP7 is an absolute mess. The boards are gimmicky again, but this time there's more bad gimmicks than good. The boards are either effective but boring, like Grand Canal and Bowser's Enchanted Inferno, or held back by either a bad gimmick or Bowser Time. The bonus stars are randomly chosen from a pool of 6, which makes one of the most strategic elements of the series dependent on random chance. Rewards for duels are decided by roulette after the minigame is over, which can potentially give you nothing, and will never give you stars. Bowser Time is a random penalty that absolutely destroys the strategy of some boards, notably Windmillville and Neon Heights, severely shaking up what it means to have a lead and plan around the board gimmick. Mic spaces function as a free doubling of your coins when on, and as worthless spaces that only waste time playing the same animation when off. Mic games turned on don't tell you to press R to make buttons show up, and turned off the variety of minigames is reduced. Character-specific orbs create a tier list, and with only 2 characters per orb that means that a 4 player game will be imbalanced from the start no matter what. Good items like Flutter Orbs can be as cheap as 5 coins in a shop and aren't horribly rare. As is the case in the previous couple games, coins earned from battle minigames influence coin star total, but the random bonus stars offset this effect (the \"idiot savant\" school of balance).";

unsigned char enc_data[] = {
  0x59, 0x61, 0x79, 0x30, 0x00, 0x00, 0x04, 0x0e, 0x00, 0x00, 0x00, 0x70,
  0x00, 0x00, 0x00, 0xb6, 0xff, 0xff, 0x7f, 0xff, 0xff, 0xd7, 0x7d, 0x5b,
  0x4f, 0xff, 0xf7, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfd, 0x5f, 0xff, 0xef,
  0xff, 0xff, 0xd9, 0xff, 0xef, 0xff, 0xd7, 0xff, 0xff, 0xff, 0xff, 0xff,
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
  0xff, 0xff, 0xf7, 0x97, 0xee, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x23, 0xdf,
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
  0xff, 0xff, 0xfc, 0x00, 0x10, 0x01, 0x10, 0x09, 0x10, 0x0d, 0x70, 0x0b,
  0x30, 0x17, 0x10, 0x1c, 0x20, 0x05, 0x10, 0x31, 0x40, 0x00, 0x50, 0x33,
  0x30, 0x07, 0x10, 0x69, 0x60, 0x00, 0x70, 0x09, 0x20, 0x44, 0x00, 0x00,
  0x10, 0xf1, 0x30, 0x00, 0x50, 0xd0, 0x10, 0x20, 0x11, 0x1f, 0x10, 0x1f,
  0x20, 0xd7, 0x60, 0x00, 0x00, 0xd7, 0x10, 0xd7, 0x20, 0xd7, 0x20, 0xf8,
  0x20, 0xda, 0x30, 0xd9, 0x00, 0xd8, 0x00, 0xd9, 0x70, 0xd8, 0x80, 0xd7,
  0x12, 0x88, 0xff, 0xd8, 0xff, 0xe0, 0x00, 0x10, 0x4a, 0x46, 0x49, 0x46,
  0x00, 0x01, 0x01, 0x01, 0x00, 0x60, 0x00, 0xff, 0xe1, 0x00, 0x68, 0x45,
  0x78, 0x69, 0x66, 0x00, 0x00, 0x4d, 0x4d, 0x00, 0x2a, 0x00, 0x00, 0x00,
  0x08, 0x00, 0x04, 0x01, 0x1a, 0x00, 0x05, 0x01, 0x3e, 0x01, 0x1b, 0x46,
  0x01, 0x28, 0x00, 0x03, 0x02, 0x31, 0x00, 0x11, 0x4e, 0x00, 0x60, 0x70,
  0x61, 0x69, 0x6e, 0x74, 0x2e, 0x6e, 0x65, 0x74, 0x20, 0x34, 0x2e, 0x32,
  0x2e, 0x31, 0x30, 0xdb, 0x00, 0x43, 0x00, 0x35, 0x25, 0x28, 0x2f, 0x28,
  0x21, 0x35, 0x2f, 0x2b, 0x2f, 0x3c, 0x39, 0x35, 0x3f, 0x50, 0x85, 0x57,
  0x50, 0x49, 0x49, 0x50, 0xa3, 0x75, 0x7b, 0x61, 0x85, 0xc1, 0xaa, 0xcb,
  0xc8, 0xbe, 0xaa, 0xba, 0xb7, 0xd5, 0xf0, 0xff, 0xff, 0xd5, 0xe2, 0xff,
  0xe6, 0xb7, 0xba, 0xff, 0xce, 0xff, 0x01, 0x39, 0x3c, 0x3c, 0x50, 0x46,
  0x50, 0x9d, 0x57, 0x57, 0x9d, 0xff, 0xdc, 0xba, 0xdc, 0xff, 0x20, 0xc0,
  0x00, 0x11, 0x08, 0x00, 0x40, 0x00, 0x40, 0x03, 0x01, 0x21, 0x00, 0x02,
  0x11, 0x01, 0x03, 0x11, 0x01, 0xff, 0xc4, 0x00, 0x1f, 0x05, 0x01, 0x00,
  0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0xb5,
  0x10, 0x00, 0x02, 0x01, 0x03, 0x03, 0x02, 0x04, 0x03, 0x05, 0x05, 0x04,
  0x04, 0x7d, 0x00, 0x04, 0x11, 0x05, 0x12, 0x21, 0x31, 0x41, 0x06, 0x13,
  0x51, 0x61, 0x07, 0x22, 0x71, 0x14, 0x32, 0x81, 0x91, 0xa1, 0x08, 0x23,
  0x42, 0xb1, 0xc1, 0x15, 0x52, 0xd1, 0xf0, 0x24, 0x33, 0x62, 0x72, 0x82,
  0x09, 0x0a, 0x16, 0x17, 0x18, 0x19, 0x1a, 0x25, 0x26, 0x27, 0x28, 0x29,
  0x2a, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3a, 0x43, 0x44, 0x45, 0x46,
  0x47, 0x48, 0x49, 0x4a, 0x53, 0x54, 0x55, 0x56, 0x57, 0x58, 0x59, 0x5a,
  0x63, 0x64, 0x65, 0x66, 0x67, 0x68, 0x69, 0x6a, 0x73, 0x74, 0x75, 0x76,
  0x77, 0x78, 0x79, 0x7a, 0x83, 0x84, 0x85, 0x86, 0x87, 0x88, 0x89, 0x8a,
  0x92, 0x93, 0x94, 0x95, 0x96, 0x97, 0x98, 0x99, 0x9a, 0xa2, 0xa3, 0xa4,
  0xa5, 0xa6, 0xa7, 0xa8, 0xa9, 0xaa, 0xb2, 0xb3, 0xb4, 0xb5, 0xb6, 0xb7,
  0xb8, 0xb9, 0xba, 0xc2, 0xc3, 0xc4, 0xc5, 0xc6, 0xc7, 0xc8, 0xc9, 0xca,
  0xd2, 0xd3, 0xd4, 0xd5, 0xd6, 0xd7, 0xd8, 0xd9, 0xda, 0xe1, 0xe2, 0xe3,
  0xe4, 0xe5, 0xe6, 0xe7, 0xe8, 0xe9, 0xea, 0xf1, 0xf2, 0xf3, 0xf4, 0xf5,
  0xf6, 0xf7, 0xf8, 0xf9, 0xfa, 0x01, 0x00, 0x03, 0x01, 0x03, 0x11, 0x02,
  0x04, 0x04, 0x03, 0x04, 0x07, 0x01, 0x02, 0x77, 0x11, 0x04, 0x05, 0x21,
  0x31, 0x06, 0x12, 0x41, 0x51, 0x07, 0x61, 0x71, 0x13, 0x22, 0x32, 0x81,
  0x08, 0x14, 0x42, 0x91, 0xa1, 0xb1, 0xc1, 0x09, 0x23, 0x33, 0x52, 0xf0,
  0x15, 0x62, 0x72, 0xd1, 0x0a, 0x16, 0x24, 0x34, 0xe1, 0x25, 0xf1, 0x14,
  0x82, 0x23, 0xda, 0x00, 0x0c, 0x03, 0x11, 0x03, 0x11, 0x00, 0x3f, 0x00,
  0x90, 0x75, 0xa7, 0xe4, 0x7a, 0xd0, 0xc4, 0x83, 0x23, 0xd6, 0x93, 0x70,
  0xa4, 0x31, 0x09, 0xcf, 0x40, 0x69, 0x39, 0x1c, 0xe3, 0xa5, 0x3b, 0x93,
  0x62, 0x71, 0xd2, 0x86, 0x38, 0x06, 0x91, 0x44, 0x27, 0x03, 0xa0, 0x02,
  0x93, 0x35, 0x48, 0x96, 0x26, 0x33, 0x9c, 0xd0, 0x0e, 0x7e, 0xa2, 0xa5,
  0x6e, 0x37, 0xb0, 0xf1, 0xd2, 0x9c, 0x9c, 0x9a, 0x06, 0x3e, 0x98, 0xec,
  0x08, 0xc0, 0x20, 0xd0, 0x04, 0x6d, 0xd6, 0x92, 0xa9, 0x10, 0xf7, 0x15,
  0x46, 0xe3, 0x81, 0x49, 0xe5, 0x10, 0xd9, 0xdd, 0x52, 0x68, 0x49, 0x81,
  0xeb, 0xcd, 0x34, 0xbf, 0x97, 0x9f, 0x94, 0x9a, 0x05, 0x61, 0x01, 0x67,
  0xe5, 0xbf, 0x2a, 0x6f, 0xf1, 0x9c, 0x74, 0x14, 0x86, 0x29, 0xeb, 0x4e,
  0x55, 0x00, 0x65, 0xaa, 0xba, 0x10, 0x96, 0xa1, 0xbc, 0x28, 0x24, 0x01,
  0x80, 0x3b, 0x54, 0x4b, 0x71, 0xbc, 0xe0, 0x0e, 0x7a, 0xfe, 0x14, 0x8b,
  0x24, 0xdf, 0xd3, 0xde, 0x9c, 0x8d, 0x90, 0x33, 0xde, 0x80, 0x1b, 0x2f,
  0xcb, 0x8c, 0x70, 0x29, 0x3a, 0x52, 0x02, 0x55, 0x8c, 0x2f, 0x27, 0x93,
  0x4d, 0x76, 0x1c, 0x9c, 0xd3, 0x12, 0x22, 0x0a, 0xcc, 0x78, 0x18, 0x34,
  0x9e, 0x5a, 0x47, 0x86, 0x00, 0x06, 0xee, 0x41, 0xe2, 0x81, 0x81, 0x07,
  0x18, 0x52, 0x01, 0x3d, 0xfd, 0x2a, 0x38, 0xe3, 0x74, 0x93, 0x2c, 0xca,
  0x31, 0xdc, 0x1e, 0xb4, 0x01, 0x3e, 0xe0, 0xe3, 0x69, 0xc1, 0xf7, 0xa0,
  0xf1, 0x48, 0x09, 0x98, 0x9e, 0xd5, 0x1b, 0x0c, 0xf4, 0x34, 0x00, 0x0c,
  0xa7, 0x22, 0x99, 0x33, 0x06, 0x8d, 0x86, 0x0e, 0x4f, 0x43, 0x4c, 0x08,
  0xe1, 0x28, 0x17, 0xe6, 0x3f, 0x31, 0xf5, 0xed, 0x52, 0x31, 0x07, 0x1c,
  0x52, 0x01, 0x06, 0x08, 0xca, 0xe0, 0x1a, 0x56, 0xeb, 0x40, 0x13, 0x35,
  0x44, 0x49, 0x43, 0x90, 0x28, 0x01, 0xa5, 0xc3, 0x0e, 0x3a, 0xd3, 0x7c,
  0xc2, 0x38, 0x34, 0x00, 0x6e, 0x0d, 0xda, 0x90, 0xfd, 0x68, 0x01, 0xc8,
  0xb8, 0xe4, 0xf5, 0xa7, 0x13, 0x40, 0x12, 0xb1, 0xa6, 0x1e, 0x68, 0x01,
  0x85, 0x06, 0x68, 0xd8, 0x28, 0x01, 0x36, 0xe3, 0xa5, 0x2a, 0xaf, 0x39,
  0x34, 0x00, 0xe3, 0xd6, 0x9b, 0x40, 0x1f, 0xff, 0xd9, 0x00
};

int main(int argc, char **argv)
{
  unsigned char *data;
  size_t size = sizeof(dec_data);
  int result_compress, result_decompress;

  data = malloc(size);

  /* Test compression */
  result_compress = yay0_compress(dec_data, sizeof(dec_data), &data, &size);
  if (result_compress != YAY0_OK)
    printf("Compression failed with error code %d\n", result_compress);
  else
    printf("Compression successful: compressed %llu bytes to %llu\n",
      sizeof(dec_data), size);

  /* Test decompression */
  result_decompress = yay0_decompress(enc_data, sizeof(enc_data), data, &size);
  if (result_decompress != YAY0_OK)
    printf("Decompression failed with error code %d\n", result_decompress);
  else
    printf("Decompression successful: decompressed %llu bytes to %llu\n",
      sizeof(enc_data), size);

  free(data);

  return result_compress == YAY0_OK && result_decompress == YAY0_OK ? 0 : -1;
}
